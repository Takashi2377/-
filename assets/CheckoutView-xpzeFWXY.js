import{_ as h,a as _,r as p,o as r,c as d,d as g,b as t,k as f,F as m,i as y,t as e,n as L}from"./index-UV12MeIp.js";import{u as b}from"./toastMessage-YhLv_bF_.js";var v={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"yuetin-hexschool",BASE_URL:"/FinalMission-Edtion1/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:a,VITE_PATH:c}=v,V={data(){return{order:{user:{}},orderId:""}},methods:{..._(b,["pushMessage"]),getOrder(){const l=`${a}/api/${c}/order/${this.orderId}`;this.isLoading=!0,this.$http.get(l).then(s=>{this.order=s.data.order,this.isLoading=!1}).catch(s=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:s.response.data.message})})},payOrder(){const l=`${a}/api/${c}/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(l).then(()=>{this.isLoading=!1,this.getOrder()}).catch(s=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"付款失敗",content:s.response.data.message})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},x={class:"container"},E={class:"my-6 row justify-content-center"},I={class:"table align-middle"},M=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),k={class:"text-end"},O=t("td",{colspan:"2",class:"text-end"},"總計",-1),T={class:"text-end"},S={class:"table"},R=t("th",{width:"100"},"Email",-1),w=t("th",null,"姓名",-1),A=t("th",null,"收件人電話",-1),B=t("th",null,"收件人地址",-1),D=t("th",null,"付款狀態",-1),C={key:0},F={key:1,class:"text-success"},N={key:0,class:"text-end"},P=t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),U=[P];function $(l,s,H,j,o,i){const u=p("VueLoading");return r(),d("div",x,[g(u,{active:l.isLoading,"z-index":1060},null,8,["active"]),t("div",E,[t("form",{class:"col-md-6",onSubmit:s[0]||(s[0]=f((...n)=>i.payOrder&&i.payOrder(...n),["prevent"]))},[t("table",I,[M,t("tbody",null,[(r(!0),d(m,null,y(o.order.products,n=>(r(),d("tr",{key:n.id},[t("td",null,e(n.product.title),1),t("td",null,e(n.qty)+"/"+e(n.product.unit),1),t("td",k,e(Math.floor(n.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[O,t("td",T,e(Math.floor(o.order.total)),1)])])]),t("table",S,[t("tbody",null,[t("tr",null,[R,t("td",null,e(o.order.user.email),1)]),t("tr",null,[w,t("td",null,e(o.order.user.name),1)]),t("tr",null,[A,t("td",null,e(o.order.user.tel),1)]),t("tr",null,[B,t("td",null,e(o.order.user.address),1)]),t("tr",null,[D,t("td",null,[o.order.is_paid?(r(),d("span",F,"付款完成")):(r(),d("span",C,"尚未付款"))])])])]),o.order.is_paid===!1?(r(),d("div",N,U)):L("",!0)],32)])])}const G=h(V,[["render",$]]);export{G as default};
