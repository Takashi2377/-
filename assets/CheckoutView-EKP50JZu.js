import{_ as m,a as l,m as y,r as a,o,c as r,d as c,b as t,h as f,F as b,j as g,t as e,l as u,w as k,e as P}from"./index-Ce5A-XYZ.js";import{u as L}from"./toastMessage-wMQCNsu2.js";import{c as _}from"./cartStore-W1ygjZH6.js";import"./sweetalert2.all-OUxAfGEE.js";const v={data(){return{orderId:"",isLoading:!1,order:{user:{}}}},methods:{...l(L,["pushMessage"]),...l(_,["payOrder","getOrder"])},computed:{...y(_,["isLoadingP","orderP"])},watch:{isLoadingP(){this.isLoading=this.isLoadingP},orderP(){this.order=this.orderP,this.order.is_paid=this.orderP.is_paid}},created(){this.orderId=this.$route.params.orderId,this.getOrder(this.orderId),this.order=this.orderP}},x={key:0,class:"container"},w={class:"my-6 row justify-content-center"},V={class:"table align-middle"},N=t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",{class:"text-end"},"單價")])],-1),I={class:"text-end"},M={colspan:"3",class:"text-end"},S={class:"table"},C=t("th",{width:"100"},"Email",-1),O=t("th",null,"姓名",-1),T=t("th",null,"收件人電話",-1),B=t("th",null,"收件人地址",-1),j=t("th",null,"付款狀態",-1),E={key:0},F={key:1,class:"text-success"},R={key:0,class:"text-end"},q=t("button",{type:"submit",class:"btn btn-danger"},"確認付款",-1),z=[q],A={key:1,class:"container"},D={class:"d-flex flex-column align-items-center is-paid"},G=t("i",{class:"bi bi-check-circle"},null,-1),H=t("h5",{class:"my-3 text-dark"},"付款完成!",-1);function J(d,i,K,Q,s,U){const h=a("VueLoading"),p=a("RouterLink");return d.orderP.is_paid?d.orderP.is_paid?(o(),r("div",A,[t("div",D,[G,H,c(p,{type:"button",class:"btn btn-secondary my-3 px-5 py-2",to:"/products"},{default:k(()=>[P(" 繼續選購 ")]),_:1})])])):u("",!0):(o(),r("div",x,[c(h,{active:s.isLoading,"z-index":1060},null,8,["active"]),t("div",w,[t("form",{class:"col-md-6",onSubmit:i[0]||(i[0]=f(n=>d.payOrder(s.orderId),["prevent"]))},[t("table",V,[N,t("tbody",null,[(o(!0),r(b,null,g(s.order.products,n=>(o(),r("tr",{key:n.id},[t("td",null,e(n.product.title),1),t("td",null,e(n.qty)+" / "+e(n.product.unit),1),t("td",I,"NT$ "+e(Math.floor(n.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",M,"總計 : NT$ "+e(Math.floor(s.order.total)),1)])])]),t("table",S,[t("tbody",null,[t("tr",null,[C,t("td",null,e(s.order.user.email),1)]),t("tr",null,[O,t("td",null,e(s.order.user.name),1)]),t("tr",null,[T,t("td",null,e(s.order.user.tel),1)]),t("tr",null,[B,t("td",null,e(s.order.user.address),1)]),t("tr",null,[j,t("td",null,[d.orderP.is_paid?(o(),r("span",F,"付款完成")):(o(),r("span",E,"尚未付款"))])])])]),d.orderP.is_paid?u("",!0):(o(),r("div",R,z))],32)])]))}const $=m(v,[["render",J]]);export{$ as default};
